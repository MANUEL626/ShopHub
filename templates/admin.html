{% extends 'partiels/page_2.html' %}

{% block content %}

{% include 'partiels/_alert_message.html' %}

{% if items %}

    <div class="grid">
        {% for item in items %}
            <div class="grid-item">
                <div class="image-container">
                    <img class="item_img" src="{{ item.get_picture_url() }}" alt="{{ item.name }}">
                </div>
                <div class="info-container">
                    <div class="description-price">
                        <div class="description">{{ item.name }}</div>
                        <div class="price">{{ item.price }} XOF</div>
                    </div>
                </div>
                <div class="button-container">
                    <a href="{{ url_for('manage', item_id=item.id) }}"><button type="submit">Manage Item</button></a>
                </div>
                <div class="button-container">
                    <button type="submit" onclick="openDeletePopup({{ item.id }})">Delete Item</button>
                </div>
            </div>
            <div id="DeletePopup-{{ item.id }}" class="popup">
                <p>Delete item?</p>
                <form action="{{ url_for('delete_item', item_id=item.id) }}" method="post" style="display:inline;">
                    <button class="log_btn" type="submit">Delete item</button>
                    <button class="log_btn" type="button" onclick="closeDeletePopup({{ item.id }})">Cancel</button>
                </form>
            </div>
            <div id="popup-overlay-{{ item.id }}" class="popup-overlay"></div>
        {% endfor %}
    </div>

    <script>
        function openDeletePopup(itemId) {
            document.getElementById('DeletePopup-' + itemId).classList.add('show');
            document.getElementById('popup-overlay-' + itemId).classList.add('show');
        }

        function closeDeletePopup(itemId) {
            document.getElementById('DeletePopup-' + itemId).classList.remove('show');
            document.getElementById('popup-overlay-' + itemId).classList.remove('show');
        }
    </script>

{% else %}
    <p>No article for the moment</p>
{% endif %}

{% endblock %}
